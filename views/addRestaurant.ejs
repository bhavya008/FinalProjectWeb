<%- include('partials/header.ejs') %> <%- include('partials/navbar.ejs') %>

        <div class="container">
            <h4 class="mt-3">Add Restaurant</h4>

            <form action="/addRestaurants" method="post" class="row g-3 mt-3">
                <div class="col-md-6">
                    <input type="text" class="form-control" id="building" name="building" placeholder="Enter building"
                        required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" id="longitude" name="longitude"
                        placeholder="Enter longitude" required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="latitude" placeholder="Enter latitude"
                        required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="street" placeholder="Enter street" required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="zipcode" placeholder="Enter zipcode" required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="borough" placeholder="Enter borough" required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="cuisine" required
                        placeholder="Enter cuisine'" /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="name" placeholder="Enter name" required /><br />
                </div>
                <div class="col-md-6">
                    <input type="text" class="form-control" name="restaurant_id" placeholder="Enter Restaurant Id"
                        required /><br />
                </div>
                <div id="grades-container">
                    <div class="grade row">
                        <div class="col-md-4">
                            <label for="grade1_date">Grade Date:</label>
                            <input type="datetime-local" class="form-control" name="grades[][date]" required />
                        </div>
                        <div class="col-md-4">
                            <label for="grade1_date">Grade:</label>
                            <input type="text" name="grades[][grade]" class="form-control"  required />
                        </div>
                        <div class="col-md-4">
                            <label for="grade1_date">Score:</label>
                            <input type="text" name="grades[][score]" class="form-control" required />
                        </div>
                    </div>
                </div>
                <div class="col-12">
                <button type="button" class="btn btn-sm btn-primary mt-2" id="add-grade">Add Grade</button>
                <button type="button" class="btn btn-sm btn-secondary mt-2" id="remove-grade">Remove Grade</button>
            </div>
            <div class="col-12">
            <button type="submit" class="btn btn-lg btn-primary mt-2">Add Restaurant</button>
        </div>
    </form>        

            <div class="container mt-5">
                <h4>
                    <%= message %>
                </h4>
            </div>
        </div>

        <script>
            document.getElementById("add-grade").addEventListener("click", function () {
                const gradesContainer = document.getElementById("grades-container");
                const newGrade = document.createElement("div");
                newGrade.classList.add("grade");

                newGrade.innerHTML = `
                <div class="grade row">
                        <div class="col-md-4">
                            <label for="grade1_date">Grade Date:</label>
                            <input type="datetime-local" class="form-control" name="grades[][date]" required />
                        </div>
                        <div class="col-md-4">
                            <label for="grade1_date">Grade:</label>
                            <input type="text" name="grades[][grade]" class="form-control"  required />
                        </div>
                        <div class="col-md-4">
                            <label for="grade1_date">Score:</label>
                            <input type="text" name="grades[][score]" class="form-control" required />
                        </div>
                    </div>
        `;

                gradesContainer.appendChild(newGrade);
            });

            document
                .getElementById("remove-grade")
                .addEventListener("click", function () {
                    const gradesContainer = document.getElementById("grades-container");
                    const lastGrade = gradesContainer.lastElementChild;

                    if (lastGrade && lastGrade.classList.contains("grade")) {
                        gradesContainer.removeChild(lastGrade);
                    }
                });
        </script>
        <%- include('./partials/footer.ejs') %>